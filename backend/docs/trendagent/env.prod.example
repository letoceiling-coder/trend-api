# Production env example â€” copy to backend/.env on server and fill secrets. Do not commit .env.
# Required for TA admin API and runbook: INTERNAL_API_KEY, DB_*, APP_KEY.

APP_NAME=TrendAgent
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://YOUR_DOMAIN

LOG_CHANNEL=stack
LOG_LEVEL=warning

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=trend_api
DB_USERNAME=
DB_PASSWORD=

BROADCAST_DRIVER=log
CACHE_DRIVER=redis
CACHE_STORE=redis
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis
SESSION_DRIVER=file
SESSION_LIFETIME=120

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=null
REDIS_DB=0

# --- Internal API key (required for /api/ta/admin/*) ---
INTERNAL_API_KEY=

# --- TrendAgent SSO / sync (secrets only on server) ---
TRENDAGENT_DEFAULT_CITY_ID=1
TRENDAGENT_DEFAULT_LANG=ru
TRENDAGENT_DEFAULT_PHONE=
TRENDAGENT_DEFAULT_PASSWORD=
TRENDAGENT_AUTO_RELOGIN=false
TRENDAGENT_QUEUE_NAME=default
TRENDAGENT_DETAIL_REFRESH_HOURS=24
TRENDAGENT_DETAIL_BATCH_SIZE=50

# --- Telegram alerts (optional; tokens never logged) ---
TA_ALERT_TELEGRAM_BOT_TOKEN=
TA_ALERT_TELEGRAM_CHAT_ID=
TA_ALERT_QUIET_HOURS=
TA_ALERT_QUIET_HOURS_TIMEZONE=Europe/Kiev

# --- TA-UI refresh allowlist when no X-Internal-Key (optional, comma-separated IPs) ---
TA_UI_ALLOW_IPS=

# --- Nginx allowlist generation (optional; script writes to /etc/nginx/ta/ta-admin-allowlist.conf) ---
# TA_ADMIN_ALLOWLIST_IPS=127.0.0.1 203.0.113.50

# --- Deploy (for php artisan deploy from local) ---
DEPLOY_SSH_HOST=89.169.39.244
DEPLOY_SSH_USER=root
DEPLOY_SSH_PORT=22
DEPLOY_GIT_REMOTE=origin
DEPLOY_GIT_BRANCH=main
DEPLOY_REMOTE_REPO_ROOT=/var/www/trend-api
DEPLOY_REMOTE_BACKEND_PATH=/var/www/trend-api/backend
DEPLOY_REMOTE_FRONTEND_PATH=/var/www/trend-api/frontend
DEPLOY_REMOTE_PHP=/usr/bin/php
DEPLOY_REMOTE_COMPOSER=/usr/bin/composer
DEPLOY_REMOTE_NODE=/usr/bin/node
DEPLOY_REMOTE_NPM=/usr/bin/npm
DEPLOY_REMOTE_WEB_USER=www-data
DEPLOY_RUN_QUEUE_RESTART=true
